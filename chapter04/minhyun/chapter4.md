객체지향 설계 → 올바른 객체에게 올바른 책임 할당, 낮은 결합도와 높은 응집도를 가진 구조를 창조하는 활동.

1. 역할, 책임, 협력이 중요한데 그중 제일 중요한 것은 책임이다.
    - 전체의 품질을 결정
2. 책임 할당 작업이 응집도와 결합도의 설계 품질과 깊이 연관 되어 있음.
    - 객체의 행동에 초점을 맞춰 합리적인 수준으로 유지

# 1. 데이터 중심의 영화 예매 시스템

시스템을 객체로 분할하는 2가지 방법

1. 상태를 분할의 중심축으로 삼는다.
    - 객체의 상태에 초점을 맞춰, 독립된 데이터 덩어리로 바라본다.
2. 책임을 분할의 중심축으로 삼는다.
    - 객체의 행동에 초점을 맞춰, 협력하는 공동체의 일원으로 바라본다.

→ 책임에 초점을 맞추자, 변경에 유연해지기 위해서.

하지만 이번 장에서는 데이터 기준 분할한 설계를 살펴본다.

- 데이터 중심의 설계에선 객체가 포함해야 하는 데이터에 집중한다.
    - ‘이 객체가 포함해야 하는 데이터는 무엇인가?’ 라는 생각이 들면 매몰되어 있는 것이다.
    - 객체의 종류를 저장하는 인스턴스 변수, 해당 인스턴스 변수에 따라 배타적으로 사용될 인스턴스 변수 등을 하나의 클래스 안에 함께 포함시키는 방법이 대표적

# 2. 설계 트레이드오프

## 캡슐화

- 상태와 행동을 하나의 객체 안에 모으는 이유 → 객체의 내부 구현을 외부로부터 감추기 위해서.
    - 객체 지향의 장점
- 객체 지향에서 가장 중요한 원리
    - 대상을 단순화하는 추상화의 한 종류
    - 변경될 수 있는 어떤 것이라도 캡슐화 → 유지보수성을 위해

## 응집도와 결합도

### 응집도

- 모듈에 포함된 내부 요소들이 연관돼 있는 정도
- 변경이 발생할 때 모듈 내부에서 발생하는 변경의 정도로 측정 가능

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/34ea7cb7-d202-4e90-926d-07b7bc241167/d48b0106-072b-4d26-a961-1c80f04e8307/Untitled.png)

### 결합도

- 의존성의 정도, 다른 모듈에 대해 얼마나 많은 지식을 가지고 있는지를 나타내는 척도
- 한 모듈이 변경되기 위해서 다른 모듈의 변경을 요구하는 정도로 측정 가능

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/34ea7cb7-d202-4e90-926d-07b7bc241167/5766e221-35a7-4c7f-bc6c-2f1da3c1c64d/Untitled.png)

**좋은 설계란 높은 응집도, 낮을 결합도를 가진 모듈로 구성된 설계이다.**

→ 설계를 변경하기 쉽게 만드는 것이 좋은 설계

# 3. 데이터 중심의 영화 예매 시스템의 문제점

- 캡슐화 위반
- 높은 결합도
- 낮은 응집도

## 캡슐화 위반

**추측에 의한 설계 전략**

- 접근자와 수정자에 과도하게 의존하는 설계 방식
- ‘다양한 상황에서 사용되겠지’ 라는 막연한 추측을 기반으로 설계하여 내부 상태 메서드를 많이 추가해야한다는 압박에 시달려 대부분의 내부 구현이 퍼블릭 인터페이스에 그대로 노출됨.
    
    → 캡슐화 위반
    

## 높은 결합도

- 여러 데이터 객체들을 사용하는 제어 로직이 특정 객체 안에 집중됨.
    - 하나의 제어 객체가 다수의 데이터 객체에 강하게 결합될 수 밖에 없음.

## 낮은 응집도

- 변경의 이유가 서로 다른 코드들을 하나의 모듈 안에 뭉쳐놓아 변경과 상관 없는 코드들이 영향을 받게 됨.
- 하나의 요구사항 변경을 위해 동시에 여러 모듈을 수정해야 함
    - 다른 모듈에 위치해야 할 책임의 일부가 엉뚱한 곳에 위치하기 때문

**단일책임 원칙(SRP)을 지키자**

# 4. 자율적인 객체를 향해

## 캡슐화를 지켜라

- 데이터를 내부에 캡슐화 하고 외부에 비공개시켜라.
    - 객체는 스스로의 상태를 책임져야함.

**캡슐화를 지키지 않았을 경우**

1. 코드 중복이 발생할 확률 높음
2. 변경에 취약함

## 스스로 자신의 데이터를 책임지는 객체

**객체 설계시 의 ‘어떤 데이터를 포함해야할까?’ 를 아래 두개 질문으로 분리하여 오퍼레이션의 집합(새로운 데이터 타입)을 얻자.**

1. 이 객체가 어떤 데이터를 포함해야 하는가?
2. 이 객체가데이터에 대해 수행해야 하는 오퍼레이션은 무엇인가?

# 5. 하지만 여전히 부족

코드 설명

## 6. 데이터 중심 설계의 문제점

### 변경에 취약한 이유

- 너무 이른 시기에 데이터에 관해 결정하도록 강요
- 협력이라는 문맥을 고려하지 않고 객체를 고립시켜 오퍼레이션 결정