# 설계 품질과 트레이드 오프

- 객체지향 설계의 핵심 : 역할, 책임, 협력
  - 협력 : 어플리케이션의 기능을 구현하기 위해 메시지를 주고받는 객체들 사이의 상호작용
  - 책임 : 개겣가 다른 객체와 협력하기 위해 수행하는 행동
  - 역할 : 대체 가능한 책임의 집합
- 객체지향 설계란
  - 올바른 객체에게 올바른 책임을 할당함녀서 낮은 결합도와 높은 응집도를 가진 구조를 창조하는 활동
  - 객체지향 설계의 핵심은 책임이다.
  - 책임을 할당하는 작업이 응집도와 결합도 같은 설계 푸밀과 깊게 연관돼 있다.
- 훌륭한 설꼐란 합리적인 비용안에서 변경을 수용할 수 있는 구조를 만드는 것
- 객체의 책임에 초점을 맞추자.

## 데이터 중심 설계
- 객체지향 설계는 데이터가 아니라 책임에 초점을 맞춰야 한다.

## 설계 트레이드오프
- 캡슐화
  - 객체의 내부 구현을 외부로부터 감추기 위함
  - 객체지향이 강력한 이유는 한곳에서 일어난 변경이 전체 시스템에 영향을 끼치지 않도록 파급효과를 적절하게 조절할 수 있는 장치를 제공하기 때문
  - 변경 가능성이 높은 부분을 구현, 상대적으로 안정적인 부분을 인터페이스
  - 객체지향 설계의 가장 중요한 원리는 불안정한 구현 세부사항을 안정적인 인터페이스 뒤로 캡슐화 하는 것
  - 캡슐화란 변경 가능성이 높은 부분을 객체 내부로 숨기는 추상화 기법
- 응집도와 결합도
  - 응집도
    - 모듈에 포함된 내부 요소들이 연관돼 있는 정도를 나타냄
    - 객체지향의 관점에서 응집도는 객체 또는 클래스에 얼마나 관련 높은 책임들을 할당했는지를 나타냄
    - 변경의 관점에서 : 변경이 발생할 때 모듈 내부에서 발새아는 변경의 정도로 측정
  - 결합도
    - 의종성의 정도를 나타내며 다른 모듈에 대해 얼마나 많은 지식을 갖고 있는지를 나타냄
    - 객체지향의 관점에서 결합도는 객체 또는 클래스가 협력에 필요한 적절한 수준의 관걔만을 유지하고 있는지를 나타냄
    - 변경의 관점에서 : 한 모듈이 변경되기 위해서 다른 모듈의 변경을 요구하는 정도
  - 일반적으로 좋은 설계란 높은 응집도와 낮은 결합도를 가진 모듈로 구성된 설계를 의미
  - 오늘의 기능을 수행하면서 내일의 변경을 수용할 수 있는 설계가 좋은 설계
  - 클래스의 구현이 아닌 인터페이스에 의존하도록 코드를 작성해야 낮은 결합도를 얻을 수 있다.
  - 응집도와 결합도를 고려하기 전에 먼저 캡슐화를 향상시키기 위해 노력

## 데이터 중심 설계의 문제점
- 캡슐화 위반
  - 객체가 사용될 문맥을 추츨할 수밖에 없는 경우 개발자는 어떤 상황에서도 해당 객체가 사용될 수 있게 최대한 많은 접근자 메서드를 추가하게 되는 것
  - 접근자와 수정에 과도하게 의존하는 설계 방식을 "추측에 의한 설꼐 전략"이라 부른다.
- 높은 결합도
  - 여러 데이터 객체들을 사용하는 제어 로직이 특정 객체 안에 집중되기 때문에 하나의 제어 객체가 다수의 데이터 객체에 강하게 결합된다는 단점
  - 데이터 중심의 설계는 전체 시스템을 하나의 거대한 의존서 덩어리로 만들어 버리기 때문에 어떤 변경이라도 일단 발생하고 나면 시스템 전체가 요동칠 수밖에 없다.
- 낮은 응집도
  - 변경과 아무 상관이 없는 코드들이 영향을 받게 된다.
  - 어떤 요구사항 변경을 수용하기 위해 하나 이상의 클래스를 수정해야 하는 것은 설계의 응집도가 낮다는 증거

## 자율적인 객체를 향해
- 캡슐화를 지켜라
  - 객체는 자신이 어떤 데이터를 가지고 있는지를 내부에 캡슐화하고 외부에 공개해서는 안된다.
  - 객체는 스스로의 상태를 책임져야 하며 외부에서는 인터페이스에 정의된 메서드를 통해서만 상태에 접근할 수 있어야 한다.
  - 속성의 가시성을 private으로 설정했다고 해도 접근자와 수정자를 통해 속성을 외부로 제공하고 있다면 캡슐화를 위반하는 것이다.
- 스스로 자신의 데이터를 책임지는 객체
  - 우리가 상태와 행동을 객체라는 하나의 단위로 묶는 이유는 객체 스스로 자신의 상태를 처리할 수 있게 위해서이다.

## 여전이 부족함
- 내부 구현의 변경이 외부로 퍼져나가는 파급효과는 캡슐화가 부족하다는 명백한 증거
- 캡슐화란 변할 수 있는 어떤 것이라도 감추는 것.

## 데이터 중심 설계의 문제점
- 취약한 이유
  - 본질적으로 너무 이른 시기에 데이터에 관해 결정하도록 강요한다.
  - 협력이라는 문맥을 고려하지 않고 객체를 고립시킨 채 오퍼레이션을 결정한다.
- 객체의 상태보다는 행동에 초점
- 올바른 객체지향 설꼐의 무게 중심은 항상 객체의 내부가 아니라 외부에 맞춰져 있어야 한다. (객체가 다른 객체와 협력하는 방법에 대한 고민)
