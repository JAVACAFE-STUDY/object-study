# 협력

객체지향 시스템은 자율적인 객체들의 공동체다. 메시지 전송은 객체 사이의 협력을 위해 사용할 수 있는 유일한 수단이다.

메시지를 수신한 객체는 메스드를 실행해 요청에 응답한다. 여기서 객체가 메시지를 처리할 방법을 스스로 선택한다는 점이 중요하다.

결과적으로 객체를 자율적으로 만드는 가장 기본적인 방법은 내부 구현을 캡슐화 하는 것이다.

## 협력이 설계를 위한 문맥을 결정한다

객체의 행동을 결정하는 것은 객체가 참여하고 있는 협력이다. 협력은 객체가 필요한 이유와 객체가 수행하는 행동의 동기를 제공한다.

협력은 객체를 설계하는 데 필요한 일종의 문맥을 제공한다.

# 책임

책임은 객체지향 설계의 핵심이다. 사실 협력이 중요한 이유는 객체에게 할당할 책임을 결정할 수 있는 문맥을 제공하기 때문이다.

적절한 협력이 적절한 책임을 제공하고, 적절한 책임을 적절한 객체에게 할당해야만 단순하고 유연한 설계를 창조할 수 있다.

## 책임 할당

자율적인 객체를 만드는 가장 기본적인 방법은 책임을 수행하는 데 필요한 정보를 가장 잘 알고 있는 전문가에게 그 책임을 할당하는 것이다.

이를 책임 할당을 위한 정보 전문가 패턴이라고 한다.

## 책임 주도 설계

협력을 설계하기 위해서는 책임에 초점을 맞춰야 한다는 것이다. 어떤 책임을 선택하느냐가 전체적인 설계의 방향과 흐름을 결정한다.

이처럼 책임을 찾고 책임을 수행할 적절한 객체를 찾아 책임을 할당하는 방식으로 협력을 설계하는 방법을 책임 주도 설계라고 부른다.

## 메시지가 객체를 결정한다

객체에게 책임을 할당하는 데 필요한 메시지를 먼저 식별하고 메시지를 처리할 객체를 나중에 선택했다는 것이 중요하다.

메시지가 객체를 선택하게 해야 하는 두 가지 중요한 이유가 있다.

- 객체가 최소한의 인터페이스를 가질 수 있게 된다.
- 추상적인 인터페이스를 가질 수 있게 된다.

### 행동이 상태를 결정한다

객체가 존재하는 이유는 협력에 참여하기 위해서다. 따라서 객체는 협력에 필요한 행동을 제공해야 한다. 객체를 객체답게 만드는 것은 객체의 상태가 아니라 객체가 다른 객체에게 제공하는 행동이다.

객체의 내부 구현에 초점을 맞춘 설계 방법을 데이터 주도 설계라고 부른다.

캡슐화를 위반하지 않도록 구현에 대한 결정을 뒤로 미루면서 객체의 행위를 고려하기 위해서는 항상 협력이라는 문맥 안에서 객체를 생각해야 한다.

# 역할 

## 역할과 협력

객체가 어떤 특정한 협력 안에서 수행하는 책임의 집합을 역할이라고 부른다. 실제로 협력을 모델링 할 때는 특정한 객체가 아니라 역할에게 책임을 할당한다고 생각하는게 좋다.

## 유연하고 재사용 가능한 협력

역할이 중요한 이유는 역할을 통해 유연하고 재사용 가능한 협력을 얻을 수 있기 때문이다.

역할은 생각하면 두 종류의 객체를 교대로 바꿔 끼울 수 있는 일종의 슬롯으로 생각할 수 있다. 이 슬롯이 바로 역할이다.
