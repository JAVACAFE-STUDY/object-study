# 유연한 설계

## 개방-폐쇠 원칙

개방-폐쇄 원칙은 런타임 의존성과 컴파일타임 의존성에 관한 이야기다. 기존 클래스는 전혀 수정하지 않은 채 애플리케이션의 동작을 확장할 수 있다는 의미

의존성 관점에서 개방-폐쇄 원칙을 따르는 설계란 컴파일타임 의존성은 유지하면서 런타임 의존성의 가능성을 확장하고 수정할 수 있는 구조라고 할 수 있다.

## 추상화가 핵심이다

개방-폐쇄 원칙의 핵심은 추상화에 의존하는 것이다.

올바른 추상화를 설계하고 추상화에 대해서만 의존하도록 관계를 제한함으로써 설계를 유연하게 확장할 수 있다.

여기서 주의할 점은 추상화를 했다고 해서 모든 수정에 대해 설계가 폐쇄되는 것은 아니다. 변경에 의한 파급효과를 최대한 피하기 위해서는 변하는 것과 변하지 않는 것이 무엇인지를 이해하고 이를 추상화의 목적으로 삼아야만 한다.

## 생성 사용 분리

팩토리 클래스를 추가하란다.

## 의존성 주입

- 생성자
- setter
- 메서드

인터페이스 주입도 있다는데 처음들어봄.

## 숨겨진 의존성은 나쁘다

의존성을 숨기면 테스트도 힘들고, 코드를 다 분석해야한다. 의존성은 구현을 위해 필요한 것이니 숨기지 말고 드러내라 라는 말이 있는데 어딨는지 못찾겠음..

## DIP 

- 상위 수준의 모듈을 하위 수준의 모듈에 의존해서는 안 된다. 둘 모두 추상화에 의존해야 한다.
- 추상화는 구체적인 사항에 의존해서는 안 된다. 구체적인 사항은 추상화에 의존해야 한다.

## 유연성에 대한 조언

유연성은 설계를 복잡하게 만든다. 적절하게 트레이드오프

## 협력과 책임이 중요하다

성급하게 객체 생성 시점에 결정하지 말고, 모든 책임이 자리를 잡은 후 가장 마지막 시점에 내리는 것이 적절할 수도 있음.